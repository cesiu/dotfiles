% Because I'm too lazy to manage my used packages properly.

% Include general settings:
\input{stdhandout.tex}

% Redefine Classic Thesis Maroon as Cal Poly green and fix colors.
\definecolor{Maroon}{RGB}{3,86,66}
\definecolor{mdenvCTsemi}{gray}{0.55}

% Bring in Classic Thesis:
\usepackage[parts,manychapters,palatino=false,beramono=false]{classicthesis}
\hypersetup{colorlinks=false}

% Set indentations:
\setlength{\parskip}{0.5em}
\setlength{\parindent}{0em}

% Fix monospacing and headings for Latin Modern:
\setmonofont{Latin Modern Mono}
\makeatletter
\DeclareRobustCommand{\spacedsmallcaps}[1]{\textls[100]{\small\ct@caps\MakeTextUppercase{#1}}}
\titleformat{\section}{\relax}{\textsc{\MakeTextLowercase{\small\thesection}}}{1em}{\spacedsmallcaps}
\renewcommand{\sectionmark}[1]{\markright{{\scriptsize\thesection}\enspace\spacedlowsmallcaps{#1}}}
\makeatother

% Realign part entries in table of contents:
\addtolength{\cftpartnumwidth}{1em}
\renewcommand{\cftpartpresnum}{\large\scshape}
\renewcommand{\cftpartaftersnumb}{\spacedsmallcaps}

% Realign chapter entries:
\setlength{\cftbeforechapskip}{0em}
\addtolength{\cftchapnumwidth}{1em}
\renewcommand{\cftchappresnum}{\hspace*{1.375em}\small}
\renewcommand{\cftchapaftersnumb}{\spacedsmallcaps}
\cftpagenumbersoff{chapter}

% Realign section entries:
\addtolength{\cftsecindent}{1em}
\addtolength{\cftsecnumwidth}{0.5em}

% Set enumitem spacing within marginpar:
\SetEnumitemKey{marginpar}{
    left=0.25em,
    labelsep=0.25em,
    topsep=0.25em,
    itemsep=0em
}

% Add Beamer-esque blocks with Classic Thesis styling:
\newmdenv[
    linecolor=Maroon,
    frametitlebackgroundcolor=Maroon,
    frametitlefont=\color{white}\scshape,
    frametitle={\textls[80]{definition}},
    skipabove=1em,
    skipbelow=0.5em
]{ctdefinition}

\newmdenv[
    linecolor=Maroon,
    frametitlebackgroundcolor=Maroon,
    frametitlefont=\color{white}\scshape,
    frametitle={\textls[80]{theorem}},
    skipabove=1em,
    skipbelow=0.5em
]{cttheorem}

\newmdenv[
    linecolor=Maroon,
    frametitlebackgroundcolor=Maroon,
    frametitlefont=\color{white}\scshape,
    frametitle={\textls[80]{corollary}},
    skipabove=1em,
    skipbelow=0.5em
]{ctcorollary}

\newmdenv[
    linecolor=mdenvCTsemi,
    frametitlebackgroundcolor=mdenvCTsemi,
    frametitlefont=\color{white}\scshape,
    frametitle={\textls[80]{example}},
    skipabove=1em,
    skipbelow=0.5em
]{ctexample}

\newmdenv[
    linecolor=mdenvCTsemi,
    frametitlebackgroundcolor=mdenvCTsemi,
    frametitlefont=\color{white}\scshape,
    frametitle={\textls[80]{example \textit{\small(cont.)}}},
    skipabove=1em,
    skipbelow=0.5em
]{ctexcont}

\newmdenv[
    linecolor=mdenvCTsemi,
    frametitle={},
    skipabove=0.5em,
    skipbelow=0.5em
]{ctsubexample}

\newmdenv[
    linecolor=mdenvCTsemi,
    frametitlebackgroundcolor=mdenvCTsemi,
    frametitlefont=\color{white}\scshape,
    frametitle={\textls[80]{lemma}},
    skipabove=1em,
    skipbelow=0.5em
]{ctlemma}
